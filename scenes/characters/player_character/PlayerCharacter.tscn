[gd_scene load_steps=15 format=3 uid="uid://c45weam7tjqmw"]

[ext_resource type="PackedScene" uid="uid://byh3hlhe1fd0j" path="res://scenes/characters/character_base/CharacterBase.tscn" id="1_5b5t2"]
[ext_resource type="Script" path="res://scenes/characters/player_character/PlayerCharacter.cs" id="2_7uq42"]
[ext_resource type="Script" path="res://scenes/components/interaction/InteractionComponent.cs" id="3_3gtcp"]
[ext_resource type="PackedScene" uid="uid://8l8u7s0m7awg" path="res://ui/PlayerHUD.tscn" id="4_161ca"]
[ext_resource type="PackedScene" uid="uid://lw8xaecvvi5q" path="res://scenes/components/sound/SoundComponent.tscn" id="5_a402o"]
[ext_resource type="PackedScene" uid="uid://uywniyg1yd8x" path="res://scenes/components/combat_grid/CombatGridComponent.tscn" id="6_uw203"]
[ext_resource type="PackedScene" uid="uid://hqdj2ivnbab7" path="res://scenes/components/combat_grid/CombatGridPoint.tscn" id="7_1kmqq"]
[ext_resource type="PackedScene" uid="uid://b3rq16aalq4c2" path="res://scenes/components/movement/MovementComponent.tscn" id="8_8i55q"]
[ext_resource type="PackedScene" uid="uid://cf510k02wbxs4" path="res://scenes/components/equipment_manager/EquipmentManager.tscn" id="9_uaq73"]

[sub_resource type="CylinderMesh" id="CylinderMesh_lnesk"]
top_radius = 0.3
bottom_radius = 0.2
height = 0.1

[sub_resource type="ConvexPolygonShape3D" id="ConvexPolygonShape3D_ef883"]
points = PackedVector3Array(-0.295156, 0.0595238, -0.0952232, 0.304742, 0.0595238, 0.0570981, 0.295196, 0.0595238, 0.0951635, -0.174525, -0.05, 0.0959839, 0.0435781, -0.05, -0.192022, -0.0952299, 0.0595238, 0.295216, 0.122222, -0.05, 0.157074, 0.0952103, 0.0595238, -0.295216, 0.174615, -0.05, -0.0959839, -0.122187, -0.05, -0.157129, -0.123748, 0.0595238, -0.28567, 0.161852, 0.0595238, 0.266637, -0.266638, 0.0595238, 0.161867, 0.247586, 0.0595238, -0.190446, -0.0436523, -0.05, 0.192022, 0.192007, -0.05, 0.0435893, -0.192026, -0.05, -0.043644, -0.304762, 0.0595238, 0.0570981, 0.0570865, 0.0595238, 0.304762, 0.304742, 0.0595238, -0.0570981, -0.247546, 0.0595238, -0.190446, -0.19039, 0.0595238, 0.247604, 0.113651, -0.0413318, -0.174851, 0.247586, 0.0595238, 0.190446, -0.0442438, -0.0330095, -0.212363, 0.0789195, -0.0414823, 0.192987, -0.0959906, -0.05, 0.174576, -0.0571657, 0.0595238, -0.304762, 0.174615, -0.05, 0.0959839, 0.19049, 0.0595238, -0.247544, -0.174525, -0.05, -0.0959839, -0.19039, 0.0595238, -0.247604)

[sub_resource type="CylinderShape3D" id="CylinderShape3D_fewu7"]
height = 0.2

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_u7t72"]
radius = 0.025
height = 1.5

[sub_resource type="SphereShape3D" id="SphereShape3D_ywvxe"]
radius = 0.025

[node name="PlayerCharacter" node_paths=PackedStringArray("PrimaryCamera", "_interactionComponent", "_equipmentManager", "_head", "FocusCast", "_soundComponent", "CombatGrid", "CharacterHealth", "CharacterAttention", "CharacterMovement", "CharacterInteraction", "CharacterSound") instance=ExtResource("1_5b5t2")]
collision_layer = 6
collision_mask = 5
script = ExtResource("2_7uq42")
PrimaryCamera = NodePath("CharacterBody/Hips/Head/PrimaryCamera")
_interactionComponent = NodePath("InteractionComponent")
_equipmentManager = NodePath("EquipmentManager")
_head = NodePath("CharacterBody/Hips/Head")
_inputSensitivity = 0.0025
FocusCast = NodePath("CharacterBody/Hips/Head/PrimaryCamera/FocusTrace")
_carryGrabSpeedMultiplier = 0.2
_stealthCapsuleHeight = 0.9
_stealthCapsulePosition = Vector3(0, 0.45, 0)
_soundComponent = NodePath("SoundComponent")
CombatGrid = NodePath("CharacterBody/CombatGridComponent")
CharacterHealth = NodePath("HealthComponent")
CharacterAttention = NodePath("AttentionComponent")
CharacterMovement = NodePath("MovementComponent")
CharacterInteraction = NodePath("InteractionComponent")
CharacterSound = NodePath("SoundComponent")

[node name="MeshInstance3D" type="MeshInstance3D" parent="." index="1"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.0464694, 0)
mesh = SubResource("CylinderMesh_lnesk")
skeleton = NodePath("../CollisionShape3D")

[node name="CollisionShape3D2" type="CollisionShape3D" parent="." index="2"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.0464694, 0)
shape = SubResource("ConvexPolygonShape3D_ef883")

[node name="CollisionShape3D" type="CollisionShape3D" parent="." index="3"]
process_mode = 4
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.1, 0)
shape = SubResource("CylinderShape3D_fewu7")
disabled = true

[node name="InteractionComponent" type="Node" parent="." index="4" node_paths=PackedStringArray("_interactionCollision", "_grabPosition", "_grabJoint", "_grabAnchor", "equipmentManager")]
script = ExtResource("3_3gtcp")
_interactionCollision = NodePath("../CharacterBody/Hips/Head/PrimaryCamera/InteractionCollision")
_grabPosition = NodePath("../CharacterBody/Hips/Head/PrimaryCamera/GrabPosition")
_grabJoint = NodePath("../CharacterBody/Hips/Head/PrimaryCamera/GrabJoint")
_grabAnchor = NodePath("../CharacterBody/Hips/Head/PrimaryCamera/StaticBody3D")
_grabRotationStrength = 8.0
equipmentManager = NodePath("../EquipmentManager")

[node name="PlayerHUD" parent="." index="5" node_paths=PackedStringArray("_interactionComponent", "_healthComponent") instance=ExtResource("4_161ca")]
reticleDefaultColor = Color(1, 1, 1, 1)
reticleUseColor = Color(0, 0, 1, 1)
reticleGrabColor = Color(1, 1, 0, 1)
reticleEquipColor = Color(0, 1, 0, 1)
_interactionComponent = NodePath("../InteractionComponent")
_healthComponent = NodePath("../HealthComponent")

[node name="Hips" type="Node3D" parent="CharacterBody" index="0"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.5, 0)

[node name="Head" type="Node3D" parent="CharacterBody/Hips" index="0"]
transform = Transform3D(-1, 0, -8.74228e-08, 0, 1, 0, 8.74228e-08, 0, -1, 0, 0, 0)

[node name="PrimaryCamera" type="Camera3D" parent="CharacterBody/Hips/Head" index="0"]

[node name="InteractionCollision" type="Area3D" parent="CharacterBody/Hips/Head/PrimaryCamera" index="0"]
transform = Transform3D(-1, 0, -8.74228e-08, 0, 1, 0, 8.74228e-08, 0, -1, 0, 0, 0)
visible = false
collision_layer = 0
collision_mask = 0

[node name="CollisionShape3D" type="CollisionShape3D" parent="CharacterBody/Hips/Head/PrimaryCamera/InteractionCollision" index="0"]
transform = Transform3D(1, 0, 0, 0, -4.37114e-08, -1, 0, 1, -4.37114e-08, 0, 0, 0.75)
shape = SubResource("CapsuleShape3D_u7t72")

[node name="GrabPosition" type="Marker3D" parent="CharacterBody/Hips/Head/PrimaryCamera" index="1"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -1.7)

[node name="GrabJoint" type="Generic6DOFJoint3D" parent="CharacterBody/Hips/Head/PrimaryCamera" index="2"]
node_a = NodePath("../StaticBody3D")
linear_limit_x/enabled = false
linear_limit_y/enabled = false
linear_limit_z/enabled = false

[node name="StaticBody3D" type="StaticBody3D" parent="CharacterBody/Hips/Head/PrimaryCamera" index="3"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -1.5)

[node name="Marker3D" type="Marker3D" parent="CharacterBody/Hips/Head/PrimaryCamera" index="4"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.412145, -0.249516, -0.347039)

[node name="FocusTrace" type="ShapeCast3D" parent="CharacterBody/Hips/Head/PrimaryCamera" index="5"]
unique_name_in_owner = true
shape = SubResource("SphereShape3D_ywvxe")
target_position = Vector3(0, 0, -50)
max_results = 4
collision_mask = 255
collide_with_areas = true
debug_shape_custom_color = Color(1, 0, 0, 1)

[node name="CombatGridComponent" parent="CharacterBody" index="1" node_paths=PackedStringArray("GridPoints") instance=ExtResource("6_uw203")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -1, -0.498571)
GridPoints = [null]

[node name="CombatGridPoint3" parent="CharacterBody/CombatGridComponent" index="0" node_paths=PackedStringArray("_collisionArea") instance=ExtResource("7_1kmqq")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -3, 0, 3.5)
_collisionArea = NodePath("../CombatGridPoint/Area3D")

[node name="CombatGridPoint2" parent="CharacterBody/CombatGridComponent" index="1" node_paths=PackedStringArray("_collisionArea") instance=ExtResource("7_1kmqq")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 3, 0, 3.5)
_collisionArea = NodePath("../CombatGridPoint/Area3D")

[node name="CombatGridPoint" parent="CharacterBody/CombatGridComponent" index="2" instance=ExtResource("7_1kmqq")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 1.5)

[node name="SoundComponent" parent="." index="7" instance=ExtResource("5_a402o")]
visible = false

[node name="MovementComponent" parent="." index="8" instance=ExtResource("8_8i55q")]
MovementSpeed = 2.3
AccelerationForce = 0.1
BrakingForce = 0.1
JumpForce = 5.0
GravityMultiplier = 1.3

[node name="EquipmentManager" parent="." index="9" node_paths=PackedStringArray("equipmentPosition") instance=ExtResource("9_uaq73")]
equipmentPosition = NodePath("../CharacterBody/Hips/Head/PrimaryCamera/Marker3D")
